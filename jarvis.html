<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Jarvis - ThinkBigPrep</title>
    <meta name="description" content="Jarvis: your AI study assistant at ThinkBigPrep." />
    <link rel="shortcut icon" href="assets/logo/thinkbigprep-icon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="css/index.css?v=1.1" />
    <link rel="stylesheet" href="css/login.css?v=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css" />
  </head>
  <body>
    <header class="header">
      <div class="header-container">
        <a href="index.html#home" class="logo" aria-label="ThinkBigPrep Logo" style="text-decoration:none;color:inherit;">
          <img src="./assets/logo/thinkbigprep-logo.svg" alt="ThinkBigPrep" />
        </a>
        <nav class="nav-desktop">
          <a href="index.html#home">Home</a>
          <a href="timetable.html">Timetable</a>
          <a href="index.html#courses">Plans</a>
          <a href="index.html#coaches">Available Tutors</a>
          <a href="about.html">About Us</a>
          <a href="jarvis.html" class="active">Jarvis</a>
          <a href="ai-curriculum.html">AI Curriculum</a>
          <a href="problem-sets.html">Think Lab <span class="new-tag">NEW</span></a>
          <a href="login.html" class="student-login-link">Student Login</a>
        </nav>
        <button class="mobile-menu-btn" onclick="toggleMobileMenu()"><i class="bi bi-list"></i></button>
      </div>
      <nav class="nav-mobile" id="mobile-menu">
        <a href="index.html#home">Home</a>
        <a href="timetable.html">Timetable</a>
        <a href="index.html#courses">Plans</a>
        <a href="index.html#coaches">Available Tutors</a>
        <a href="about.html">About Us</a>
        <a href="jarvis.html" class="active">Jarvis</a>
        <a href="ai-curriculum.html">AI Curriculum</a>
        <a href="problem-sets.html">Think Lab <span class="new-tag">NEW</span></a>
      </nav>
    </header>

    <main class="settings-wrap" style="min-height:calc(100vh - 220px);">
      <section class="settings-card" aria-labelledby="jarvisTitle" style="max-width:900px; margin:120px auto 0;">
        <div class="settings-head">
          <h1 id="jarvisTitle" class="settings-title">Jarvis</h1>
          <p class="settings-sub">Your AI study assistant for fast summaries, practice questions, and explanations.</p>
        </div>
        <div style="padding:16px; display:grid; gap:12px;">
          <div>
            <label for="jarvisPrompt" class="setting-label">Ask Jarvis</label>
            <textarea id="jarvisPrompt" rows="4" placeholder="Paste text or describe what you need..." style="width:100%; padding:10px; border:1px solid #e5e7eb; border-radius:8px; resize:vertical;"></textarea>
          </div>
          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button id="btnSummary" class="btn btn-primary" type="button">Generate Summary</button>
            <button id="btnQuestions" class="btn btn-secondary" type="button">Create Practice Questions</button>
            <button id="btnExplain" class="btn" type="button">Explain Step-by-Step</button>
          </div>
          <div id="jarvisOutput" style="min-height:160px; border:1px solid #e5e7eb; border-radius:12px; padding:14px; background:#fff;"></div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <div class="footer-logo"><img src="./assets/logo/thinkbigprep-logo.svg" alt="ThinkBigPrep" /><span>ThinkBigPrep</span></div>
          </div>
          <div class="footer-section">
            <h4>SEE ALSO</h4>
            <ul>
              <li><a href="index.html#home">Home</a></li>
              <li><a href="timetable.html">Timetable</a></li>
              <li><a href="ai-curriculum.html">AI Curriculum</a></li>
              <li><a href="problem-sets.html">Think Lab</a></li>
            </ul>
          </div>
          <div class="footer-section"><h4>CONTACT US</h4><p>Phone: 201-665-0123</p><p>Email: info@thinkbigprep.com</p></div>
        </div>
        <div class="footer-bottom"><p>ThinkBigPrep Â© 2025</p></div>
      </div>
    </footer>

    <script>window.TBP_AUTH_BASE='https://cramprep.onrender.com';</script>
    <script src="index.js"></script>
    <script src="login.js?v=1.0"></script>
    <script>
      (function(){
        function val(){ return (document.getElementById('jarvisPrompt').value||'').trim(); }
        function setOut(html){ document.getElementById('jarvisOutput').innerHTML = html; }
        async function callJarvis(prompt){
          try{
            setOut('<div class="tbp-star-spinner" aria-label="Loading"></div>');
            const res = await fetch((window.TBP_AUTH_BASE||'') + '/ai/agent1/generate-assist-v2?lesson=ad-hoc', {
              method:'POST', headers:{ 'Content-Type':'application/json' }, body: JSON.stringify({ user: prompt })
            });
            const j = await res.json().catch(()=>({}));
            if (!res.ok || !j || !j.ok){ throw new Error((j && j.error)||'Jarvis failed'); }
            setOut('<pre style="white-space:pre-wrap">'+ (j.preview||'') +'</pre>');
          }catch(e){ setOut('<div style="color:#b00">'+ String(e && e.message || e) +'</div>'); }
        }
        document.getElementById('btnSummary').addEventListener('click', function(){
          const p = val(); if (!p) return; callJarvis('Give a concise study summary:\n\n'+p);
        });
        document.getElementById('btnQuestions').addEventListener('click', function(){
          const p = val(); if (!p) return; callJarvis('Create 5 practice questions with answers based on this content:\n\n'+p);
        });
        document.getElementById('btnExplain').addEventListener('click', function(){
          const p = val(); if (!p) return; callJarvis('Explain step-by-step, with examples, for:\n\n'+p);
        });
      })();
    </script>
  </body>
  </html>


